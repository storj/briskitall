#!/usr/bin/env bash

set -e

cd -- "$( dirname -- "${BASH_SOURCE[0]}" )"

echo "Running clef..."
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="
echo "Unlock masterseed and accounts with the following password:"
echo "    $(cat ./runtime/clef/pwd.txt)"
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="
echo "======================================================================="

docker run --rm -it -u "$(id -u):$(id -g)" \
    -v "./runtime/clef:/clef" -w /clef \
    ethereum/client-go:alltools-latest clef \
        --chainid "$(cat config/chainid)" \
        --configdir /clef \
        --keystore /clef/keystore \
        --suppress-bootwarn
